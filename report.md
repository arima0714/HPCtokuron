# ハイパフォーマンスコンピューティング特論レポート課題

# 課題
1. アクセラレータとは?

<!-- 数値アクセラレータとはどういうもので、どのような特徴があるか述べること。 -->

<!-- 授業で述べられているので、それを踏まえて一般論を述べる -->

2. SIMD 命令を使ったプログラムの高速化

* 行列計算の高速化
<!-- 行列計算プログラム libblas.c を SIMD 命令及び OpenMP を用いて高速化し、横軸を行列サイズ(1 辺要素数。4 の倍数の時のみ考えればよい)、縦軸を Gflops とするグラフに表すこと。その際、比較のために「何も修正せず OS 標準の BLAS ライブラリを使った場合」、「何も修正せず自分でコンパイルした libblas.so を使った場合」、「libblas.c で OpenMP に対応した場合」、「libblas.c で SIMD, OpenMP に対応した場合」の四つの線をプロットすること。libblas.c のソースコードも末尾に付けること。

オプション課題: brown01 で gcc で行った場合や、brown01 で pgcc コンパイラを使ってintrinsics を使わない場合(-mavx2 -mfma の代わりに-fastsse、-fopenmp の代わりに-mp が必要)もプロットせよ。 -->

* 分子シミュレーションプログラムの高速化

<!-- メインなのだが、これが一番大変 -->

<!-- mr3_avx.c を改良して高速化し、check プログラムから呼び出して計算速度と計算誤差を求め、二つのグラフに表すこと。一つ目のグラフは横軸が粒子数、縦軸が計算速度(Gflops)とすること。

その際、「SIMD も OpenMP も使わない場合」、「OpenMP 命令を使う場合」、「SIMD も OpenMPも使う場合」の三つの線をプロットすること。もう一つのグラフは、横軸が粒子数、縦軸が計算誤差(check プログラムで Average error と表示される値)とすること。こちらも三つの線を描くこと。mr3_avx.c のソースコードも末尾に付けること。 -->

<!-- SIMDのところが一番難しい、できなかったら仕方ない。OpenMPはできてほしい。 -->

* リアルタイム分子シミュレーションでの性能

<!-- cras によって AVX 命令を使ったリアルタイムの分子シミュレーションを行った際のスナップショット画像を載せること。SIMD も OpenMP も使った場合に関して、粒子数が 64, 1000, 4096の 3 つの場合について示すこと。なお、スナップショット画像は、計算を始めてから 10 秒程度経った後で撮ること(計算が破綻していないことを確認するため)。 -->

<!-- これも難しい。できなかったら仕方ない。 -->

3. GPU による分子シミュレーションプログラムの高速化と性能モデル
* 分子シミュレーションプログラムの高速化

<!-- mr3_gpu.cu を改良して高速化し、check プログラムから呼び出して計算速度と計算誤差を求め、二つのグラフに表すこと。一つ目のグラフは横軸が粒子数、縦軸が計算速度(Gflops)とすること。その際、最適化手法の適応状況に応じて、例えば「最適化前」、「シェアードメモリを使った場合」、「最も最適化した場合」のように複数の線をプロットすること。もう一つのグラフは、横軸が粒子数、縦軸が計算誤差(check プログラムで Average error と表示される値)とすること。こちらは「最適化前」と「最も最適化した場合」の二つの線を描くこと。GPU は学生用端末のものだけで試したのでよい。自分が行った最適化に関しては解説を付けること。mr3_gpu.cu のソースコードも末尾に付けること。 -->

* リアルタイムシミュレーションでの性能

<!-- cras によって学生用端末の GPU を使ったリアルタイムの分子シミュレーションを行った際のスナップショット画像を載せること。粒子数が 64, 1000, 4096 の 3 つの場合について示すこと。なお、スナップショット画像は、計算を始めてから 10 秒程度経った後で撮ること(計算が破綻していないことを確認するため)。 -->

<!-- オプション課題:自宅から*学生用端末や GPU サーバーを使った場合についても同様に、粒子数が 64, 1000, 4096 の 3 つの場合についてスナップショット画像を示すこと。 -->

* 計算時間のモデル式

<!-- 第14回にやる。アクセラレータのパラメータによって性能が決まるので、具体的な数値を求めて、モデルを作成する。すでに測定したデータから予測を実施し、モデルを評価する。 -->

<!-- 粒子数を変えたときの 1 フレームあたりの計算時間(cras で s/frm と表示される値)がどのようなモデル式で見積もれるかを述べ、学生用端末の GPU を使った場合についてグラフに表すこと。横軸を粒子数、縦軸を 1 フレームあたりの計算時間とし、実測した数値と、モデル式による曲線の両方をプロットすること。モデル式の中では、「CPU による処理時間」、「GPU による処理時間」、「描画にかかる時間」、「通信にかかる時間」、「粒子数によらない時間」、のそれぞれに関して係数となるパラメータを求めること。 -->

<!-- オプション課題:自宅から*学生用端末や GPU サーバーを使った場合についても同様に、モデル式のパラメーターを求めグラフに表すこと。その際、ネットワークの差異や GPU の差異に応じて粒子数によって性能の違いがあると思われるが、モデル式のパラメーターの違いを使って性能の違いについて議論せよ。 -->

<!-- *ここで自宅からとは、自宅の PC で cras_sock -c でクライアントを動かし、CED で cras_sock-s でサーバーを動かした時を意味する -->